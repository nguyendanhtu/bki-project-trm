--2012/06/25

GO
CREATE PROC [dbo].[pr_V_DM_DOT_THANH_TOAN_LoadTheoThoiGian_va_giangvien]
@GIANG_VIEN DECIMAL,
@THANG_TT DECIMAL,
@NAM_TT DECIMAL,
@ID_DON_VI_TT DECIMAL
as
SELECT * FROM V_DM_DOT_THANH_TOAN vddtt
WHERE (MONTH(vddtt.NGAY_TT_DU_KIEN) = @THANG_TT OR @THANG_TT =0)
AND (YEAR(vddtt.NGAY_TT_DU_KIEN)=@NAM_TT OR @NAM_TT=0)
AND (vddtt.ID_DON_VI_THANH_TOAN = @ID_DON_VI_TT OR @ID_DON_VI_TT =0)
AND vddtt.MA_DOT_TT IN (SELECT gtt.SO_PHIEU_THANH_TOAN FROM V_GD_THANH_TOAN gtt WHERE gtt.ID_GIANG_VIEN = @GIANG_VIEN)
ORDER BY vddtt.ID desc